<!-- <div class="p-card intro-y">
  <div class="danh-sach-ho-so__head p-3 flex flex-wrap justify-content-between">
    <div>
      <input type="text" pInputText [(ngModel)]="search" placeholder="Tìm kiếm" (ngModelChange)="searchData()"
        class="p-inputtext p-component p-element" />
      <p-button label="Thêm quyết định" styleClass="p-button-link" icon="pi pi-plus" (click)="btnAdd()"></p-button>
    </div>
    <div class="inline-block">
      <span class="text-base "> Nhiệm kỳ: </span>
      <p-dropdown [options]="filter_nhiemky" (onChange)="onChangeDrp1($event)" [showClear]="true"
        [style]="{'min-Width':'200px'}" placeholder="Chọn..."></p-dropdown>
    </div>
    <div class="flex justify-content-center text-center">
      <p-button *ngIf="permission.canAdd" label="Xuất excel" styleClass="p-button-link"
        class="flex justify-content-center text-center" icon="pi pi-file-export" (click)="exportExcel()"></p-button>

    </div>
  </div>
  <div class="danh-sach-ho-so__body">
    <p-table [value]="danhSachQuyHoach" [rows]="10" [paginator]="true">
      <ng-template pTemplate="header">
        <tr>
          <th class="text-center">Quyết định quy hoạch</th>
          <th class="text-center">Người ký</th>
          <th class="text-center">Nhiệm kỳ </th>
          <th class="text-center">Đợt</th>
          <th class="text-center">Ngày ban hành</th>
          <th class="text-center" style="width: 10rem;">Thao tác</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-DanhSach>
        <tr>
          <td class="text-left"> {{DanhSach.ten_quyhoach}}</td>
          <td class="text-center">{{DanhSach.nguoi_ky}}</td>
          <td class="text-center">{{DanhSach.nhiem_ky}}</td>
          <td class="text-center">{{DanhSach.dot}}</td>
          <td class="text-center">{{DanhSach.ngay_banhanh|date:'dd/MM/yyyy'}}</td>

          <td class="text-center">
            <button pRipple pButton type="button"
              class="p-button p-button-icon p-button-text p-button-rounded p-button-success" icon="pi pi-file"
              (click)="btnDetail(DanhSach)">
            </button>
            <button pRipple pButton type="button"
              class="p-button p-button-icon p-button-text p-button-rounded p-button-primary" icon="pi pi-file-edit"
              (click)="btnEdit(DanhSach)">
            </button>
            <button *ngIf="permission.canDelete" pRipple pButton type="button"
              class="p-button p-button-icon p-button-text p-button-rounded p-button-danger" icon="pi pi-trash"
              (click)="btnDelete(DanhSach)"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div> -->

<ng-template #nsFormEdit let-c="close">
  <div class="model-header container p-2 bg-green-500 text-0">
    <h4 class="modal-title">{{formState.formTitle}}</h4>

  </div>

  <div class="container-scroll modal-body ovic-modal-body">
    <div class="card" style="padding: 20px;">
      <form [formGroup]="formData">

        <div class="row ">
          <div class="col">
            <label class="txt-label" for="">Quyết định số:</label>
            <input type="text" placeholder="Mã số quyết định" class="p-inputtext p-component p-element w-full"
              formControlName="ma_quyhoach">
          </div>
        </div>
        <div class=" row mb-2">

          <div class="col">
            <label class="txt-label" for="">Quyết định Quy hoạch:</label>
            <input type="text" pInputText placeholder="Quyết định Quy hoạch"
              class="p-inputtext p-component p-element w-full" formControlName="ten_quyhoach">
          </div>
        </div>
        <div class=" row mb-2">
          <div class="col">
            <label class="txt-label" for="">Nội dung:</label>
            <textarea class="p-inputtextarea p-inputtext p-component p-element w-full" [rows]="5" [cols]="30"
              formControlName="noidung_quyhoach"></textarea>
          </div>
        </div>
        <div class="row flex">
          <div class="col">
            <label class="txt-label" for="">Người ký:</label>
            <input type="text" pInputText placeholder="Người ký" class="p-inputtext p-component p-element w-full"
              formControlName="nguoi_ky">
          </div>
          <div class="col">
            <label class="txt-label" for="">Ngày ban hành:</label>
            <input type="date" [style]="{'minWidth':'100%'}" pInputText formControlName="ngay_banhanh">
          </div>
        </div>
        <div class="row mb-2">
          <div class="col">
            <label class="txt-label" for="">Nhiệm kỳ::</label>
            <!-- <input type="text" pInputText placeholder="Nhiệm kỳ" class="p-inputtext p-component p-element w-full"
                formControlName="nhiem_ky"> -->
            <p-inputMask mask="9999 - 9999" placeholder="yyyy - yyyy" slotChar="yyyy - yyyy"
              [style]="{'minWidth':'100%'}" formControlName="nhiem_ky"></p-inputMask>
          </div>
          <div class="col">
            <label class="txt-label" for="">Đợt:</label>
            <input type="text" pinputtext placeholder="Đợt" class="p-inputtext p-component p-element w-full"
              formControlName="dot">
          </div>
        </div>
        <div class="row mb-2">
          <label class="txt-label" for="">File quyết định:</label>
        </div>
        <div class="field form-name flex flex-column pb-1" style="flex: 1;">
          <button (click)="myUploader()" class="btn btn-primary"><i class="pi pi-upload"></i> Upload</button>
          <input class="d-none" #fileChooser type="file" multiple="true" (change)="fileChnages($event)">
          <div class="onShowFile flex justify-content-between" *ngFor="let f of fileUploaded">
            <div class="">
              <label class="txt-label align-items-center">{{f.title}}</label>
            </div>
            <div class="inline">
              <button pButton pRipple (click)="downloadFile(f)" type="button" icon="pi pi-download"
                class="p-button-rounded p-button-primary p-button-text"></button>
              <button pButton pRipple type="button" icon="pi pi-times" (click)="deleteFile(f)"
                class="p-button-rounded p-button-danger p-button-text"></button>
            </div>
          </div>
        </div>
      </form>
    </div>
    <div class="flex ml-3 mt-3 ">
      <button (click)="updateForm()" [disabled]="formData.invalid" pButton pRipple
        class=" mr-2 max-w-10rem p-button-success" icon="pi pi-save" label="Xác nhận"></button>
      <button pRipple pButton type="button" class="p-button p-button-danger" icon="pi pi-times"
        (click)="btnCancel()"></button>
    </div>
  </div>

</ng-template>


<div class="p-card intro-y h-full">
  <!-- headding -->
  <br>
  <div class="p-2 flex flex-wrap justify-content-between ">
    <div>
      <input type="text" pInputText [(ngModel)]="search" placeholder="Tìm kiếm" (ngModelChange)="searchData()"
        class="p-inputtext p-component p-element" />
      <p-button label="Thêm quyết định" styleClass="p-button-link" icon="pi pi-plus" (click)="btnAdd()"></p-button>
    </div>
    <div class="inline-block">
      <span class="text-base "> Nhiệm kỳ: </span>
      <p-dropdown [options]="filter_nhiemky" (onChange)="onChangeDrp1($event)" [showClear]="true"
        [style]="{'min-Width':'200px'}" placeholder="Chọn..."></p-dropdown>
    </div>
    <div class="flex justify-content-center text-center">
      <button pButton pRipple type="button" *ngIf="permission.canAdd" label="Xuất excel" icon="pi pi-file-export"
        class="p-button-rounded p-button-success" (click)="exportExcel()"></button>

    </div>
  </div>
  <!-- body -->
  <div class="row m-2 h-full">
    <div class="set-width inline-block flex flex-wrap flex-row justify-content-between align-items-center col-md-3 p-3"
      *ngFor="let item of danhSachQuyHoach_bu">
      <div class="w-full  inline-block border-round-lg shadow-6 bg-white">
        <img src="../../../../../../assets/images/img-card.jpg" alt="" style="background-size: cover;width: 100%;"
          class="border-round-lg border-bottom-1 h-15rem">
        <div class="m-2">
          <div class="headding-card text-xl font-medium text-center align-items-center p-2 text_hover text-primary"
            (click)="btnDetail(item)">
            {{item.ten_quyhoach}}
          </div>
          <div class="text-lg font-medium border-top-1 p-2">
            <i class="pi pi-id-card text-lg"> </i>
            Quyết định số:
            <p class="text-base font-weight-normal d-sm-inline-block">
              {{item.ma_quyhoach}}
            </p>
          </div>
          <div class="text-lg font-medium p-2">
            <i class="pi pi-calendar text-lg"></i>
            Nhiệm kỳ:
            <p class="text-base font-weight-normal d-sm-inline-block">
              {{item.nhiem_ky}}
            </p>
          </div>
          <div class="text-lg font-medium p-2 m-0">
            <i class="pi pi-check-circle text-lg"></i>
            Người duyệt:
            <p class="text-base font-weight-normal d-sm-inline-block m-0">
              {{item.nguoi_ky}}
            </p>
          </div>
        </div>

        <div class="flex border-top-1">
          <div class="w-12 flex justify-content-center align-items-center">
            <p-button label="Sửa" styleClass="p-button-link" class="p-button-text p-button-rounded p-button-primary "
              (click)="btnEdit(item)"></p-button>
          </div>
          <div *ngIf="permission.canDelete" class="w-12 flex justify-content-center align-items-center border-left-1">
            <button pButton pRipple label="Xoá" styleClass="p-button-link"
              class="p-button-text p-button-rounded p-button-danger text-base" (click)="btnDelete(item)"></button>
          </div>

        </div>

      </div>

    </div>
  </div>


  <!-- footer -->
  <mat-paginator class="mt-2" (page)="changesPage($event)" [pageIndex]="pageIndex" [length]="pageNumber"
    [pageSize]="pageSize" hidePageSize showFirstLastButtons aria-label="Select page">
  </mat-paginator>



</div>
