<div class="p-card intro-x">
  <div class="danh-sach__head p-3 ">
    <!-- <input type="text" pInputText [(ngModel)]="search" placeholder="Tìm kiếm" (ngModelChange)="searchData()"
      class="p-inputtext p-component p-element" /> -->
    <button pButton pRipple class="p-button-outlined" label="Thêm khen thưởng(kỷ luật)" styleClass="p-button-link "
      icon="pi pi-plus " (click)="btnAdd()"></button>
  </div>
  <div class="danh-sach-ho-so__body">
    <p-table [value]="nsKhenthuong_Kyluat">
      <ng-template pTemplate="header">
        <tr>
          <th class="text-center">Phân loại</th>
          <th class="text-center">Tên</th>
          <th class="text-center">Số quyết định</th>
          <th class="text-center">Ngày tháng</th>
          <th class="text-center">File minh chứng</th>
          <th class="text-center">Thao tác</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-nsKhenthuong_Kyluat>
        <tr>
          <td class="text-center">{{nsKhenthuong_Kyluat.phanloai}}</td>
          <td class="text-center">{{nsKhenthuong_Kyluat.ten}}</td>
          <td class="text-center">{{nsKhenthuong_Kyluat.so_quyetdinh}}</td>
          <td class="text-center">{{nsKhenthuong_Kyluat.ngaythang|date :'dd/MM/yyyy'}}</td>

          <td class="text-center">

            <div *ngFor="let item of nsKhenthuong_Kyluat.file_minhchung">
              <label class="pt-2 btn-open" (click)="openFilre(item)">{{item.title}}</label>
              <button pButton pRipple (click)="downloadFile(item)" type="button" icon="pi pi-download"
                class="p-button-rounded p-button-primary p-button-text"></button>
            </div>
          </td>

          <td class="text-center">
            <button pRipple pButton type="button"
              class="p-button p-button-icon p-button-text p-button-rounded p-button-primary" icon="pi pi-file-edit"
              (click)="btnEdit(nsKhenthuong_Kyluat)">

            </button>
            <button pRipple pButton type="button"
              class="p-button p-button-icon p-button-text p-button-rounded p-button-danger" icon="pi pi-trash"
              (click)="btnDelete(nsKhenthuong_Kyluat)"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</div>

<ng-template #nsFormEdit let-c="close">
  <div class="model-header container mt-3">
    <h4 class="modal-title">{{formState.formTitle}}</h4>

  </div>
  <div class="modal-body ovic-modal-body">
    <form [formGroup]="formData">
      <div class="card" style="padding: 20px;">
        <div class=" row mb-2">

          <div class="col">
            <label class="txt-label" for="">Phân loại:</label>
            <p-dropdown class="w-full" optionLabel="label" optionValue="value" [options]="phanloai"
              placeholder="Chọn..." formControlName="phanloai" [style]="{'minWidth':'100%'}"></p-dropdown>
          </div>

          <div class="col">
            <label class="txt-label" for="">Tên:</label>
            <input type="text" placeholder="(Tên quyết định khen thưởng, kỷ luật)"
              class="p-inputtext p-component p-element w-full" formControlName="ten">
          </div>

        </div>
        <div class=" row mb-2">
          <div class="col">
            <label class="txt-label" for="">Số quyết định:</label>
            <input type="text" placeholder="(Tên quyết định khen thưởng, kỷ luật)"
              class="p-inputtext p-component p-element w-full" formControlName="so_quyetdinh">

          </div>
          <div class="col">
            <label class="txt-label" for="">Ngày tháng:</label>
            <input type="date" class="p-inputtext p-component p-element w-full" formControlName="ngaythang">

          </div>
        </div>
        <br>
        <div class="field form-name flex flex-column pb-1" style="flex: 1;">
          <button (click)="myUploader()" class="btn btn-primary"><i class="pi pi-upload"></i> Upload</button>
          <input class="d-none" #fileChooser type="file" multiple="true" (change)="fileChnages($event)">
          <br>
          <div class="onShowFile flex justify-content-between" *ngFor="let f of fileUploaded">
            <div class="">
              <label class="txt-label align-items-center">{{f.title}}</label>
            </div>
            <div class="inline">
              <button pButton pRipple (click)="downloadFile(f)" type="button" icon="pi pi-download"
                class="p-button-rounded p-button-primary p-button-text"></button>
              <button pButton pRipple type="button" icon="pi pi-times" (click)="deleteFile(f)"
                class="p-button-rounded p-button-danger p-button-text"></button>
            </div>
          </div>
        </div>
        <div class="flex ">
          <button (click)="updateForm()" [disabled]="formData.invalid" pButton pRipple
            class=" mr-2 max-w-10rem p-button-success" icon="pi pi-save" label="Xác nhận"></button>
          <button pRipple pButton type="button" class="p-button p-button-danger" icon="pi pi-times"
            (click)="btnCancel()"></button>
        </div>
      </div>
    </form>
  </div>
</ng-template>
